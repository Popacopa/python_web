{% extends 'base.html' %}

{% block title %}Список заказов билетов{% endblock %}
{% block header %}Список заказов билетов{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
    <a href="{% url 'task2_3:ticketorder_create' %}" class="btn btn-primary">
        Создать новый заказ
    </a>
</div>

<table>
    <thead>
        <tr>
            <th>Пассажир</th>
            <th>Рейс</th>
            <th>Номер места</th>
            <th>Статус</th>
            <th>Дата заказа</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %}
        <tr>
            <td>{{ order.passenger.name }}</td>
            <td>{{ order.flight }}</td>
            <td>{{ order.seat_number }}</td>
            <td>
                <span style="
                    padding: 4px 8px;
                    border-radius: 3px;
                    font-size: 12px;
                    {% if order.order_status == 'booked' %}background: #fff3cd; color: #856404;{% endif %}
                    {% if order.order_status == 'paid' %}background: #d1ecf1; color: #0c5460;{% endif %}
                    {% if order.order_status == 'cancelled' %}background: #f8d7da; color: #721c24;{% endif %}
                ">
                    {{ order.get_order_status_display }}
                </span>
            </td>
            <td>{{ order.order_date|date:"d.m.Y H:i" }}</td>
            <td>
                <a href="{% url 'task2_3:ticketorder_edit' order.pk %}" class="btn btn-warning">Редактировать</a>
                <a href="{% url 'task2_3:ticketorder_delete' order.pk %}" class="btn btn-danger">Удалить</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" style="text-align: center;">Нет заказов билетов</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div style="margin-top: 20px;">
    <h3>Статистика:</h3>
    <p>Всего заказов: {{ orders.count }}</p>
    <p>Забронировано: {{ orders|length }}</p>
</div>
{% endblock %}