{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Заказы билетов</h2>
    <a href="{% url 'ticket_create' %}" class="btn btn-success">Создать заказ</a>
</div>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Пассажир</th>
            <th>Рейс</th>
            <th>Дата заказа</th>
            <th>Место</th>
            <th>Статус оплаты</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for ticket in tickets %}
        <tr>
            <td>{{ ticket.passenger.name }}</td>
            <td>{{ ticket.flight }}</td>
            <td>{{ ticket.order_date|date:"d.m.Y H:i" }}</td>
            <td>{{ ticket.seat_number }}</td>
            <td>
                {% if ticket.is_paid %}
                <span class="badge bg-success">Оплачено</span>
                {% else %}
                <span class="badge bg-warning">Не оплачено</span>
                {% endif %}
            </td>
            <td>
                <a href="{% url 'ticket_edit' ticket.pk %}" class="btn btn-warning btn-sm">Редактировать</a>
                <a href="{% url 'ticket_delete' ticket.pk %}" class="btn btn-danger btn-sm">Удалить</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">Нет заказов</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}